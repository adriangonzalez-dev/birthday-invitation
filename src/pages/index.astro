---
import '@fontsource/rock-salt';
import Layout from '../layouts/Layout.astro';
import Image from '../components/Image.astro';
import Content from '../components/Content.astro';
import Map from '../components/Map.astro';
import Background from '../components/Background.astro';
import Spinner from '../components/Spinner.astro';

---

<Layout title="Cumple de Vilma!">
	<div id="spinner" class="spinner">
		<Spinner/>
	</div>
	<main id="main-content" class="hidden">
		<Background/>
		<section class="content">
			<h2 class="text-2xl font-bold text-center title">Estas invitado a mi cumpleaños!</h2>
			<Image/>
			<h3 class="name">Vilma</h3>
			<Content/>
			<Map/>
		</section>
	</main>
</Layout>

<style>
	.spinner {
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
		height: 100vh;
		background-color: #2C2C2C; /* Asegúrate de que el fondo sea visible si el main aún no está visible */
		z-index: 9999; /* Asegúrate de que el spinner esté por encima de todo */
		position: fixed;
		top: 0;
		left: 0;
	}

	#main-content.hidden {
		display: none;
	}
	main {
		margin: auto;
		padding: 1rem;
		width: 100%;
		height: 100vh;
		max-width: calc(100% - 2rem);
		color: white;
		font-size: 20px;
		line-height: 1.6;
		position: relative;
		display: flex;
	}

	.title{
		filter: drop-shadow(0 0 0.5px #fdf76b) /* Primer resplandor cercano */
                drop-shadow(0 0 1px #dd4eaf) /* Segundo resplandor más amplio */
                drop-shadow(0 0 3px #df535a)
				
	}
	.content{
		width: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.5rem;
	}

	.name{
		font-family: 'Rock Salt', cursive;
		font-size: 3rem;
		font-weight: 600;
	}

	
</style>

<script>
	// Este código se ejecuta en el lado del cliente
	window.addEventListener("load", function() {
		const spinner = document.getElementById('spinner');
		const mainContent = document.getElementById('main-content');

		if (spinner && mainContent) {
			// Darle tiempo extra para asegurar que todos los recursos estén cargados
			setTimeout(() => {
				spinner.style.display = 'none';
				mainContent.style.display = 'flex';
			}, 1000); // 1000ms = 1 segundo
		}
	});
</script>